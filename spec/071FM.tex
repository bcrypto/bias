% Ticket Management
\section{Управление федерацией (УФ)}\label{FM}

\subsection{Обзор}\label{FM.Intro}

Пакет УФ устанавливает требования по взаимодействию сторон федерации, в которой 
СИ распространяет утверждения аутентификации. 

Гарантом отношений доверия в федерации является ЦФ.
Отношения доверия строятся на сертификатах открытых ключей,
которые получают СИ, ПС и другие стороны федерации.
%
Сертификаты выпускаются в ИОК, которую представляет ЦФ.

Для получения услуг аутентификации ПС регистрируется перед СИ.
%
ПС пересылает СИ данные необходимые для указания услуги: имя, описание, сетевой 
адрес, другое. Стороны при необходимости обмениваются данными, которые позволят 
им проверять подлинность друг друга и устанавливать защищенные соединения. 
%
Регистрация может быть автоматизирована и выполняться через специальный сервис,
реализуемый СИ.
%
По окончании регистрации СИ назначает ПС уникальный идентификатор. Он будет 
указываться в БА, выдаваемых по запросам данной ПС.

\subsection{Требования}\label{FM.Reqs}

% ЦФ

\req{УФ}{1--3}
ЦФ должен представлять СИ, СР и ПС сервисы управления сертификатами открытых 
ключей: выпуска, отзыва, проверки статуса. 

\req{УФ}{1--3}
СИ при присоединении к федерации должна согласовать с ЦФ уровни гарантий 
идентификации, аутентификации и федерации, которые СИ планирует поддерживать.

\req{УФ}{1--3}
ЦФ должен контролировать:
\begin{itemize}
\item
соблюдение сторонами инфраструктуры аутентификации правил (политик) федерации;
\item
формат билетов, которые выпускает СИ;
\item
правила использования идентификационных данных пользователей, которым следует ПС.
\end{itemize}

% регистрация

\req{УФ}{1--3}
Данные, которыми обмениваются ПС и СИ в процессе регистрации, 
должны передаваться по защищенному соединению (с аутентификацией обеих сторон).

% согласование с пользователем

\req{УФ}{1--3}
СИ должна согласовывать с пользователем выпуск билетов для ПС, которая 
запросила аутентификацию. 
%
Пользователю должна быть предоставлена возможность автоматического согласования 
выпуска по запросам определенной ПС.
%
Пользователь должна иметь возможность отменить автоматическое согласование.

% todo:
% В процессе работы с пользователем ПС может открыть защищенное соединение 
% со СИ (например, для получения БА). В момент открытия соединения может быть 
% открыто соединение пользователь --- СИ, в котором выполняется аутентификация.
% 
% В момент открытия соединения с ПС СИ должна предоставить информацию о 
% предшествующей аутентификации пользователя и сделать запрос о необходимости 
% повторной аутентификации. 
% 
% Пользователь может закрывать соединения с ПС и СИ независимо друг от друга.
% Поэтому стороны не должны делать предположений о том, что соединения открыты.
